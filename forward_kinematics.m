function x_tip = forward_kinematics(angles)

% frame_base to frame_origin
g_orig = [0,-1,0,0.75; ...
      1,0,0,0.5; ...
      0,0,1,1.0; ...
      0,0,0,1];
  
 % frame 0 to frame_base
 g_base = [1,0,0,0.220; ...
      0,1,0,0.140; ...
      0,0,1,0.346; ...
      0,0,0,1];
  
 % frame 1 to frame 0
 g1 = @(theta) ...
     [cos(theta),0,-sin(theta),0; ...
      sin(theta),0,cos(theta),0; ...
      0,-1,0,0; ...
      0,0,0,1];
  
% frame 2 to frame 1
 g2 = @(theta) ...
     [cos(theta),0,sin(theta),0; ...
      sin(theta),0,-cos(theta),0; ...
      0,1,0,0; ...
      0,0,0,1];
  
 % frame 3 to frame 2
 g3 = @(theta) ...
     [cos(theta),0,-sin(theta),0.045; ...
      sin(theta),0,cos(theta),0; ...
      0,-1,0,0.55; ...
      0,0,0,1];
  
 % frame 4 to frame 3
 g4 = @(theta) ...
     [cos(theta),0,sin(theta),0; ...
      sin(theta),0,-cos(theta),0; ...
      0,1,0,0; ...
      0,0,0,1];
  
  % frame 5 to frame 4
 g5 = @(theta) ...
     [cos(theta),0,-sin(theta),-0.045; ...
      sin(theta),0,cos(theta),0; ...
      0,-1,0,0.3; ...
      0,0,0,1];
  
  % frame 6 to frame 5
 g6 = @(theta) ...
     [cos(theta),0,sin(theta),0; ...
      sin(theta),0,-cos(theta),0; ...
      0,1,0,0; ...
      0,0,0,1];
 
% frame 7 to frame 6
 g7 = @(theta) ...
     [cos(theta),-sin(theta),0,0; ...
      sin(theta),cos(theta),0,0; ...
      0,0,1,0.06; ...
      0,0,0,1];
  
 % tip of pen to frame 7 (only translation (910-850)+120)
 g_tip = [1,0,0,0; ...
          0,1,0,0; ...
          0,0,1,0.12; ...
          0,0,0,1];
  
% join transforms
x_tip = g_orig*g_base*g1(angles(1))*g2(angles(2))*g3(angles(3))*g4(angles(4))*g5(angles(5))*g6(angles(6))*g7(angles(7))*g_tip;
